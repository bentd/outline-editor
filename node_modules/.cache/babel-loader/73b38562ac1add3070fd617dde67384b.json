{"ast":null,"code":"import $ from \"jquery\";\nvar ADD_BULLET = \"ADD_BULLET\";\nvar EDIT_BULLET = \"EDIT_BULLET\";\nvar REMOVE_BULLET = \"REMOVE_BULLET\";\nvar INDENT_BULLET = \"INDENT_BULLET\";\nvar UNINDENT_BULLET = \"UNINDENT_BULLET\";\nvar CHANGE_CURRENT_NOTE = \"CHANGE_CURRENT_NOTE\";\n\nfunction addBullet(position, uuid) {\n  return {\n    type: ADD_BULLET,\n    position: position,\n    uuid: uuid,\n    exec: function exec(state) {\n      var _position = position;\n\n      var childPosition = _position.pop();\n\n      var parentPosition = _position.shift();\n\n      var parent = state.all[parentPosition].children;\n\n      while (_position.length > 0) {\n        parentPosition = _position.shift();\n        parent = parent[parentPosition].children;\n      }\n\n      parent.splice(childPosition + 1, 0, {\n        content: \"\",\n        note: \"\",\n        id: uuid,\n        completed: false,\n        children: []\n      });\n      setTimeout(function () {\n        document.getElementById(uuid).focus();\n      }, 0);\n      return state;\n    }\n  };\n}\n\nfunction editBullet(position, content) {\n  return {\n    type: EDIT_BULLET,\n    position: position,\n    content: content\n  };\n}\n\nfunction removeBullet(position) {\n  return {\n    type: REMOVE_BULLET,\n    position: position\n  };\n}\n\nfunction indentBullet(position) {\n  return {\n    type: INDENT_BULLET,\n    position: position,\n    exec: function exec(state) {\n      console.log(position);\n      var _position = position;\n\n      var childPosition = _position.pop();\n\n      var parents = [];\n\n      if (childPosition == 0) {\n        return state;\n      }\n\n      var parentPosition = _position.shift();\n\n      var parent = state.all[parentPosition].children;\n      parents.push(parent);\n\n      while (_position.length > 0) {\n        parentPosition = _position.shift();\n        parent = parent[parentPosition].children;\n        parents.push(parent);\n      }\n\n      var child = parent.splice(childPosition, 1)[0];\n      var above = parent[childPosition - 1];\n      above.children.push(child);\n      parents.push(above);\n      setTimeout(function () {\n        for (var _parent in parents) {\n          var selector = \"#\".concat(_parent.id);\n          $(\"#\".concat(_parent.id)).closest(\".bullet\").find(\".collapse\").addClass(\"show\");\n        }\n      }, 0);\n      return state;\n    }\n  };\n}\n\nfunction unindentBullet(position) {\n  return {\n    type: UNINDENT_BULLET,\n    position: position\n  };\n}\n\nfunction getNote(positionArray, all) {\n  var index = positionArray.shift();\n\n  if (positionArray.length == 0) {\n    return all[index];\n  } else {\n    return getNote(positionArray, all[index].children);\n  }\n}\n\nexport { ADD_BULLET, EDIT_BULLET, REMOVE_BULLET, INDENT_BULLET, UNINDENT_BULLET, addBullet, editBullet, removeBullet, indentBullet, unindentBullet, getNote };","map":{"version":3,"sources":["/Users/bentd/Work/Notes/bullet-editor/src/Actions.js"],"names":["$","ADD_BULLET","EDIT_BULLET","REMOVE_BULLET","INDENT_BULLET","UNINDENT_BULLET","CHANGE_CURRENT_NOTE","addBullet","position","uuid","type","exec","state","_position","childPosition","pop","parentPosition","shift","parent","all","children","length","splice","content","note","id","completed","setTimeout","document","getElementById","focus","editBullet","removeBullet","indentBullet","console","log","parents","push","child","above","_parent","selector","closest","find","addClass","unindentBullet","getNote","positionArray","index"],"mappings":"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","sourcesContent":["import $ from \"jquery\";\n\nconst ADD_BULLET = \"ADD_BULLET\";\nconst EDIT_BULLET = \"EDIT_BULLET\";\nconst REMOVE_BULLET = \"REMOVE_BULLET\";\nconst INDENT_BULLET = \"INDENT_BULLET\";\nconst UNINDENT_BULLET = \"UNINDENT_BULLET\";\nconst CHANGE_CURRENT_NOTE = \"CHANGE_CURRENT_NOTE\";\n\nfunction addBullet(position, uuid) {\n  return {\n    type: ADD_BULLET,\n    position,\n    uuid,\n    exec: (state) => {\n      let _position = position;\n      let childPosition = _position.pop();\n      let parentPosition = _position.shift();\n      let parent = state.all[parentPosition].children;\n      while (_position.length > 0) {\n        parentPosition = _position.shift();\n        parent = parent[parentPosition].children;\n      }\n      parent.splice(childPosition + 1, 0, {content: \"\", note: \"\", id: uuid, completed: false, children: []});\n      setTimeout(() => {\n        document.getElementById(uuid).focus();\n      }, 0);\n      return state;\n    }\n  }\n}\n\nfunction editBullet(position, content) {\n  return {\n    type: EDIT_BULLET,\n    position,\n    content\n  }\n}\n\nfunction removeBullet(position) {\n  return {\n    type: REMOVE_BULLET,\n    position\n  }\n}\n\nfunction indentBullet(position) {\n  return {\n    type: INDENT_BULLET,\n    position,\n    exec: (state) => {\n      console.log(position);\n      let _position = position;\n      let childPosition = _position.pop();\n      let parents = [];\n      if (childPosition == 0) {\n        return state;\n      }\n      let parentPosition = _position.shift();\n      let parent = state.all[parentPosition].children;\n      parents.push(parent);\n      while (_position.length > 0) {\n        parentPosition = _position.shift();\n        parent = parent[parentPosition].children;\n        parents.push(parent);\n      }\n      let child = parent.splice(childPosition, 1)[0];\n      let above = parent[childPosition-1];\n      above.children.push(child);\n      parents.push(above);\n      setTimeout(() => {\n        for (let _parent in parents) {\n          let selector = `#${ _parent.id }`;\n          $(`#${ _parent.id }`).closest(\".bullet\").find(\".collapse\").addClass(\"show\");\n        }\n      }, 0);\n      return state;\n    }\n  }\n}\n\nfunction unindentBullet(position) {\n  return {\n    type: UNINDENT_BULLET,\n    position\n  }\n}\n\nfunction getNote(positionArray, all) {\n  let index = positionArray.shift();\n  if (positionArray.length == 0) {\n    return all[index]\n  }\n  else {\n    return getNote(positionArray, all[index].children)\n  }\n}\n\n\n\nexport { ADD_BULLET,\n         EDIT_BULLET,\n         REMOVE_BULLET,\n         INDENT_BULLET,\n         UNINDENT_BULLET,\n         addBullet,\n         editBullet,\n         removeBullet,\n         indentBullet,\n         unindentBullet,\n         getNote };\n"]},"metadata":{},"sourceType":"module"}