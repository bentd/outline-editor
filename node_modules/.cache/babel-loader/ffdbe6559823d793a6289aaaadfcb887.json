{"ast":null,"code":"import _toConsumableArray from \"/Users/bentd/Work/Notes/bullet-editor/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport $ from \"jquery\";\nvar ADD_BULLET = \"ADD_BULLET\";\nvar EDIT_BULLET = \"EDIT_BULLET\";\nvar DELETE_BULLET = \"DELETE_BULLET\";\nvar INDENT_BULLET = \"INDENT_BULLET\";\nvar UNINDENT_BULLET = \"UNINDENT_BULLET\";\n\nfunction addBullet(position, uuid) {\n  return {\n    type: ADD_BULLET,\n    position: position,\n    uuid: uuid,\n    exec: function exec(state) {\n      var childPosition = position.slice(-1)[0];\n      var parent = getNode(position.slice(0, -1), state.root);\n      parent.children.splice(childPosition + 1, 0, {\n        content: \"\",\n        note: \"\",\n        id: uuid,\n        completed: false,\n        children: []\n      });\n      setTimeout(function () {\n        $(\"#\".concat(uuid)).find(\".bullet-content\").focus();\n      }, 0);\n      return state;\n    }\n  };\n}\n\nfunction editBullet(position, content) {\n  return {\n    type: EDIT_BULLET,\n    position: position,\n    content: content,\n    exec: function exec(state) {\n      var node = getNode(position, state.root);\n      node.content = content;\n      console.log(\"editBullet content\", content);\n      console.log(\"editBullet state\", state);\n      return state;\n    }\n  };\n}\n\nfunction deleteBullet(position) {\n  return {\n    type: DELETE_BULLET,\n    position: position,\n    exec: function exec(state) {\n      var parent = getNode(position.slice(0, -1), state.root);\n      parent.children.splice(position.slice(-1)[0], 1);\n      return state;\n    }\n  };\n}\n\nfunction indentBullet(position) {\n  return {\n    type: INDENT_BULLET,\n    position: position,\n    exec: function exec(state) {\n      if (position.slice(-1)[0] == 0) {\n        return state;\n      }\n\n      var childPosition = position.slice(-1)[0];\n      var tree = getTree(position.slice(0, -1), state.root);\n      var newParent = getNode([].concat(_toConsumableArray(position.slice(0, -1)), [childPosition - 1]), state.root);\n      var oldParent = tree.slice(-1)[0];\n      var child = oldParent.children.splice(childPosition, 1)[0];\n      newParent.children.push(child);\n      tree.push(newParent);\n      setTimeout(function () {\n        tree.map(function (parent) {\n          $(\"#\".concat(parent.id)).children(\".collapse\").addClass(\"show\");\n        });\n      }, 0);\n      return state;\n    }\n  };\n}\n\nfunction unindentBullet(position) {\n  return {\n    type: UNINDENT_BULLET,\n    position: position,\n    exec: function exec(state) {\n      if (position.length < 3) {\n        return state;\n      }\n\n      var childPosition = position.slice(-1)[0];\n      var oldParentPosition = position.slice(-2)[0];\n      var tree = getTree(position.slice(0, -2), state.root);\n      var newParent = tree.slice(-1)[0];\n      var oldParent = getNode(position.slice(0, -1), state.root);\n      var child = oldParent.children.splice(childPosition, 1)[0];\n      newParent.children.splice(oldParentPosition + 1, 0, child);\n      setTimeout(function () {\n        tree.slice(0, -2).map(function (parent) {\n          $(\"#\".concat(parent.id)).children(\".collapse\").addClass(\"show\");\n        });\n      }, 0);\n      return state;\n    }\n  };\n}\n\nfunction getNode(indices, root) {\n  var node = root[indices.shift()];\n\n  while (indices.length > 0) {\n    node = node.children[indices.shift()];\n  }\n\n  return node;\n}\n\nfunction getTree(indices, root) {\n  var tree = [];\n  var node = root[indices.shift()];\n  tree.push(node);\n\n  while (indices.length > 0) {\n    node = node.children[indices.shift()];\n    tree.push(node);\n  }\n\n  return tree;\n}\n\nexport { ADD_BULLET, EDIT_BULLET, DELETE_BULLET, INDENT_BULLET, UNINDENT_BULLET, addBullet, editBullet, deleteBullet, indentBullet, unindentBullet, getNode, getTree };","map":{"version":3,"sources":["/Users/bentd/Work/Notes/bullet-editor/src/Actions.js"],"names":["$","ADD_BULLET","EDIT_BULLET","DELETE_BULLET","INDENT_BULLET","UNINDENT_BULLET","addBullet","position","uuid","type","exec","state","childPosition","slice","parent","getNode","root","children","splice","content","note","id","completed","setTimeout","find","focus","editBullet","node","console","log","deleteBullet","indentBullet","tree","getTree","newParent","oldParent","child","push","map","addClass","unindentBullet","length","oldParentPosition","indices","shift"],"mappings":"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","sourcesContent":["import $ from \"jquery\";\n\nconst ADD_BULLET = \"ADD_BULLET\";\nconst EDIT_BULLET = \"EDIT_BULLET\";\nconst DELETE_BULLET = \"DELETE_BULLET\";\nconst INDENT_BULLET = \"INDENT_BULLET\";\nconst UNINDENT_BULLET = \"UNINDENT_BULLET\";\n\nfunction addBullet(position, uuid) {\n  return {\n    type: ADD_BULLET,\n    position,\n    uuid,\n    exec: (state) => {\n      let childPosition = position.slice(-1)[0];\n      let parent = getNode(position.slice(0,-1), state.root);\n      parent.children.splice(childPosition + 1, 0, {content: \"\", note: \"\", id: uuid, completed: false, children: []});\n      setTimeout(() => {\n        $(`#${uuid}`).find(\".bullet-content\").focus();\n      }, 0);\n      return state;\n    }\n  }\n}\n\nfunction editBullet(position, content) {\n  return {\n    type: EDIT_BULLET,\n    position,\n    content,\n    exec: (state) => {\n      let node = getNode(position, state.root);\n      node.content = content;\n      console.log(\"editBullet content\", content);\n      console.log(\"editBullet state\", state);\n      return state;\n    }\n  }\n}\n\nfunction deleteBullet(position) {\n  return {\n    type: DELETE_BULLET,\n    position,\n    exec: (state) => {\n      let parent = getNode(position.slice(0, -1), state.root);\n      parent.children.splice(position.slice(-1)[0], 1);\n      return state;\n    }\n  }\n}\n\nfunction indentBullet(position) {\n  return {\n    type: INDENT_BULLET,\n    position,\n    exec: (state) => {\n      if (position.slice(-1)[0] == 0) { return state }\n      let childPosition = position.slice(-1)[0];\n      let tree = getTree(position.slice(0,-1), state.root);\n      let newParent = getNode([...position.slice(0,-1), (childPosition-1)], state.root);\n      let oldParent = tree.slice(-1)[0];\n      let child = oldParent.children.splice(childPosition,1)[0];\n      newParent.children.push(child);\n      tree.push(newParent);\n      setTimeout(() => {\n        tree.map(parent => {\n          $(`#${parent.id}`).children(\".collapse\").addClass(\"show\");\n        });\n      }, 0);\n      return state;\n    }\n  }\n}\n\nfunction unindentBullet(position) {\n  return {\n    type: UNINDENT_BULLET,\n    position,\n    exec: (state) => {\n      if (position.length < 3) { return state }\n      let childPosition = position.slice(-1)[0];\n      let oldParentPosition = position.slice(-2)[0];\n      let tree = getTree(position.slice(0, -2), state.root);\n      let newParent = tree.slice(-1)[0];\n      let oldParent = getNode(position.slice(0, -1), state.root);\n      let child = oldParent.children.splice(childPosition, 1)[0];\n      newParent.children.splice((oldParentPosition + 1), 0, child);\n      setTimeout(() => {\n        tree.slice(0,-2).map(parent => {\n          $(`#${parent.id}`).children(\".collapse\").addClass(\"show\");\n        });\n      }, 0);\n      return state;\n    }\n  }\n}\n\nfunction getNode(indices, root) {\n  let node = root[indices.shift()];\n  while (indices.length > 0) {\n    node = node.children[indices.shift()];\n  }\n  return node;\n}\n\nfunction getTree(indices, root) {\n  let tree = [];\n  let node = root[indices.shift()];\n  tree.push(node)\n  while (indices.length > 0) {\n    node = node.children[indices.shift()];\n    tree.push(node);\n  }\n  return tree;\n}\n\n\n\nexport { ADD_BULLET,\n         EDIT_BULLET,\n         DELETE_BULLET,\n         INDENT_BULLET,\n         UNINDENT_BULLET,\n         addBullet,\n         editBullet,\n         deleteBullet,\n         indentBullet,\n         unindentBullet,\n         getNode,\n         getTree };\n"]},"metadata":{},"sourceType":"module"}